stages:
  - build

variables:
  WORKING_BRANCH: t-010-dev

build:
  stage: build
  
  image: docker:20.10.12
  
  services:
    - docker:20.10.12-dind
  
  variables:
    DOCKER_TLS_CERTDIR: "/certs"
  
  script:
    - docker build -t qr:1.0 applications/qr/
    - docker build -t backend:1.0 applications/backend/ 
    - docker build -t website:1.0 applications/website 
  only:
    variables:
      - $WORKING_BRANCH == "t-010-dev"
  tags:
    - t010-build-protected

